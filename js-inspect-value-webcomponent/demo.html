<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Inspect Value</title>
<script src="./InspectValue.js"></script>
<style>

inspect-value {
    display: block;
}

</style>
</head>
<body>
<inspect-value-property>
    Ololo<inspect-value slot="value">Mememe</inspect-value>
</inspect-value-property>
<script type="text/javascript">

document.body.appendChild(InspectValue.create());
document.body.appendChild(InspectValue.create(null));
document.body.appendChild(InspectValue.create(true));
document.body.appendChild(InspectValue.create(false));
document.body.appendChild(InspectValue.create(0));
document.body.appendChild(InspectValue.create(1234));
document.body.appendChild(InspectValue.create(13461347123582458n));
document.body.appendChild(InspectValue.create("Ololo"));
// document.body.appendChild(InspectValue.create(window));
document.body.appendChild(InspectValue.create([0, 1, "Mememe", 1234n]));
document.body.appendChild(InspectValue.create(new Array(100).fill('long string').join(' ')));
document.body.appendChild(InspectValue.create(new Set([1,2,3,4])));
var m = new Map();
m.set({}, 'obj1');
m.set([], 'arr');
m.set({}, 'obj2');
document.body.appendChild(InspectValue.create(m));
document.body.appendChild(InspectValue.create({
    null: null,
    boolTrue: true,
    boolFalse: false,
    num0: 0,
    num1234: 1234,
    bigint: 13461347123582458n,
    str: "Ololo",
    arr: [0, 1, "Mememe", 1234n],
    [Symbol('sym')]: 'Symbol is here',
    Boolean: new Boolean(false),
}));
document.body.appendChild(InspectValue.create([,,,,1234,5,6,7,8]));
document.body.appendChild(InspectValue.create(new Date()));
document.body.appendChild(InspectValue.create(new Date(NaN)));
document.body.appendChild(InspectValue.create(window));
document.body.appendChild(InspectValue.create(Symbol('sym')));

class Ololo {
    get ololo() {
        return 'mememe';
    }
}
document.body.appendChild(InspectValue.create(new Ololo()));

const named = (param) => '1234' + param;
document.body.appendChild(InspectValue.create(named));
document.body.appendChild(InspectValue.create((param) => '5678' + param));
document.body.appendChild(InspectValue.create(new Error(`Test error`)));

try {
    1n / 0n;
}
catch (err) {
    document.body.appendChild(InspectValue.create(err));
}

document.body.appendChild(InspectValueProperty.create(new InspectValue.Getter(() => {
    return new InspectValue.InfoText(`You've clicked it`);
}), 'inline getter'));

let recursiveGetterFunction = () => {
    alert(`Returning same getter as a result`);
    return recursiveGetter;
};
let recursiveGetter = new InspectValue.Getter(recursiveGetterFunction);
document.body.appendChild(InspectValue.create(recursiveGetterFunction));
document.body.appendChild(InspectValueProperty.create(recursiveGetter, 'recursive inline getter'));

let valueWrapper = new InspectValue.ValueWrapper(0);
document.body.appendChild(InspectValue.create(valueWrapper));
valueWrapper._tmr = setInterval(() => { valueWrapper.set(valueWrapper.get() + 1) }, 1000);

(async () => {
    let asyncFunction = async (a) => {
        await new Promise(resolve => setTimeout(resolve, 5000));
        a = await a;
        if (isNaN(a)) {
            throw new Error(`Argument 'a' is NaN`);
        }
        return a + 1
    };
    document.body.appendChild(InspectValue.create(asyncFunction));
    
    const prom0 = asyncFunction(0);
    document.body.appendChild(InspectValue.create(prom0));
    
    const prom1 = asyncFunction(asyncFunction(0));
    document.body.appendChild(InspectValue.create(prom1));
    const res1 = await prom1;
    document.body.appendChild(InspectValue.create(res1));
    
    const prom2 = asyncFunction(NaN);
    document.body.appendChild(InspectValue.create(prom2));
    const res2 = await prom2;
    document.body.appendChild(InspectValue.create(res2));
})();


</script>
</body>
</html>